# ðŸ”Ž **Fluxo BÃ¡sico de ComunicaÃ§Ã£o no Spring Boot**

**1. Controller â†’ 2. Service â†’ 3. Repository â†’ 4. Banco de Dados**

E na volta:
**Banco de Dados â†’ Repository â†’ Service â†’ Controller â†’ Resposta para o Cliente**

# ðŸ“Œ **ResumÃ£o Simplificado**

- ==**UsuÃ¡rio** â†’ Faz uma requisiÃ§Ã£o HTTP==
- ==**Controller** â†’ Recebe e manda para o Service== = sÃ³ repassar a requisiÃ§Ã£o para o service
- ==**Service** â†’ Faz as regras de negÃ³cio e manda para o Repository== = aplica as regras de negÃ³cio, antes de chamar o repository
- ==**Repository** â†’ Salva no Banco== = salva no banco
- ==**Banco** â†’ Retorna a resposta==
- ==**Service** â†’ Repassa a resposta==
- ==**Controller** â†’ Retorna a resposta para o usuÃ¡rio==

===------------------------------------------------------------------------------===

private Double inss = calculoINSS(func.getSalarioBruto());
    private Double valeTransporte = func.getValeTransporte() ? func.getSalarioBruto() * 0.06 : 0.0;
    private Integer dependentes = func.getDependentes();
    private Double valorPelosDependentes = (dependentes * 189.59);
    private Double irrf = calculoIRRF();
    private Double horasExtras = func.getHorasExtras() * ((func.getSalarioBruto()/220) * 1.5);
    private Double salarioLiquido = func.getSalarioBruto() - (inss + irrf + valeTransporte) + horasExtras + valorPelosDependentes;



    public Double calculoINSS(Double salario){
        /*
                tabela atual do inss 17/03/2025
                AtÃ© 1.518,00	7,5%
                De 1.518,01 atÃ© 2.793,88	9,0%
                De 2.793,89 atÃ© 4.190,83	12,0%
                De 4.190,84 atÃ© 8.157,41	14,0%
         */

        if(salario <= 1518.00){
            return salario * 0.075;
        }
        if(salario <= 2793.88){
            return salario * 0.09;
        }
        if(salario <= 4190.83){
            return salario * 0.12;
        }
        else{
            return salario * 0.14;
        }
    }

    public Double calculoIRRF(){
        /*
            tabela atual do irrf 17/03/2025
            AtÃ© 2.259,20	            Isento	  0,00
            De 2.259,21 atÃ© 2.826,65	7,5%	169,44
            De 2.826,66 atÃ© 3.751,05	15%	    381,44
            De 3.751,06 atÃ© 4.664,68	22,5%	662,77
            Acima de 4.664,68	        27,5%	896,00
        */
        double baseCalculo = func.getSalarioBruto() - inss - valeTransporte - valorPelosDependentes;

        if(baseCalculo <= 2259.20){
            return 0.0;
        }
        if(baseCalculo <= 2826.65){
            return (baseCalculo * 0.075) - 169.44;
        }
        if(baseCalculo <= 3751.05){
            return (baseCalculo * 0.15) - 381.44;
        }
        if(baseCalculo <= 4664.68){
            return (baseCalculo * 0.225) - 662.77;
        }
        else{
            return (baseCalculo * 0.275) - 896.00;
        }

    }